<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/styles-acc.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Kufi+Arabic:wght@100..900&family=Raleway:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" href="image/logo/book-open-reader-solid.svg" type="image/svg">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-B2Z6G6EY81"></script>
    <script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-B2Z6G6EY81');</script>
    <title>انشاء حساب | Sign up</title>
    <link rel="icon" type="image/svg" sizes="32x32" href="image/logo/basket.svg">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="navbar">
            <a href="index.html">
                <div class="logo">
                    <svg class="logo-sahat-alllm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="#183153" d="M160 96a96 96 0 1 1 192 0A96 96 0 1 1 160 96zm80 152l0 264-48.4-24.2c-20.9-10.4-43.5-17-66.8-19.3l-96-9.6C12.5 457.2 0 443.5 0 427L0 224c0-17.7 14.3-32 32-32l30.3 0c63.6 0 125.6 19.6 177.7 56zm32 264l0-264c52.1-36.4 114.1-56 177.7-56l30.3 0c17.7 0 32 14.3 32 32l0 203c0 16.4-12.5 30.2-28.8 31.8l-96 9.6c-23.2 2.3-45.9 8.9-66.8 19.3L272 512z"/></svg>
                    <h1>Sahat Al-llm</h1>
                </div>
                <div class="root-linge">
                    <ul>
                        <li>ليس لدي حساب! <a href="login.html">إنشاء حساب</a></li>
                    </ul>
                </div>
            </a>
        </nav>
    </header>
    <!-- Form Section -->
    <section class="section-signup">
        <form id="loginForm">
            <div class="row">
                <div class="fc-head-title">
                    <h3>Sahat Al-llm تسجيل الدخول إلى</h3>
                    <p>.من الجميل أن أراك! يرجى تسجيل الدخول باستخدام حسابك</p>
                </div>
                <div class="fc-email-input">
                    <input type="email" name="email" id="email" placeholder="البريد الإلكتروني" required />
                    <span id="emailError" class="error"></span>
                </div>
                <div class="fc-password-input">
                    <div class="password-field position-relative">
                        <input placeholder="+20" type="number" id="number" class="form-control" maxlength   ="11" name="number" required />
                        <span id="passwordError" class="error"></span>
                    </div>
                </div>
                <div class="fc-bgt-type">
                    <button type="submit">إرسال</button>
                </div>
                <p><small>By continuing, you agree to our <a href="#!">Terms of Service</a> &amp; <a href="#!">Privacy Policy</a></small></p>
            </div>
        </form>
        <div class="fc-logo-griy">
            <img src="image/element/profile-login.svg" alt="لا توجد صورة" loading="lazy">
        </div>    
    </section>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const loginForm = document.getElementById("loginForm");

            loginForm.addEventListener("submit", function (event) {
                event.preventDefault(); // منع الإرسال الافتراضي للنموذج

                // القيم المدخلة في النموذج
                const emailInput = document.getElementById("email").value.trim();
                const numberInput = document.getElementById("number").value.trim();

                // طلب جلب ملف JSON
                fetch("JSON/users.json")
                    .then((response) => {
                        if (!response.ok) {
                            throw new Error("خطأ في تحميل البيانات.");
                        }
                        return response.json();
                    })
                    .then((users) => {
                        // البحث عن المستخدم المطابق
                        const user = users.find(
                            (u) => u.email === emailInput && u.password === numberInput
                        );

                        if (user) {
                            // تخزين البيانات في Local Storage
                            localStorage.setItem("userName", user.name);
                            localStorage.setItem("userEmail", user.email);

                            // الانتقال إلى صفحة index.html
                            window.location.href = "index.html";
                        } else {
                            alert("البريد الإلكتروني أو الرقم غير صحيح.");
                        }
                    })
                    .catch((error) => {
                        console.error("حدث خطأ:", error);
                        alert("تعذر التحقق من البيانات. حاول مرة أخرى لاحقًا.");
                    });
            });
        });
    </script>
</body>
</html>